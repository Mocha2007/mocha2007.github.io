<!doctype html>
<html lang="en-US">
<meta charset="utf-8">
<meta name="description" content="Mocha's Machine">
<link rel="shortcut icon" href="img/favicon.ico">
<link href=simple.css type="text/css" rel="stylesheet" title="Light">
<link href=dark.css type="text/css" rel="alternate stylesheet" title="Dark"> 
<link href=blend.css type="text/css" rel="alternate stylesheet" title="Blend">
<link href=print.css type="text/css" rel="stylesheet" media="print">
<script src="toc.js"></script>
<script src="turing.js"></script>
<style>
#program{text-align:center;}
.pointed{color:#080;background-color: #CEC;text-style:bold;}
pre{font-family:Monospace;background-color:#000;color:#ccc;}
</style>
<title>Mocha's Machine</title>
<div id="nav"></div>
<div id="top"><h1 id="Mocha's Machine">Mocha's Machine</h1></div>

<div id="program">
	<textarea id="code" rows="16" cols="64"></textarea><br/>
	<input type="submit" value="Load" onclick="run();">
	<input type="submit" value="Step" onclick="fstep();">
	<input type="submit" value="Reset" onclick="reset();">
	Line <span id="line">0</span>
	 | Pointer: <span id="pointing">0</span>
	 | State: <span id="machinestate">[PRESS RESET]</span>
	 <br/>
	 &downarrow; MEMORY &downarrow;
</div>
<div id="memory"></div>

<h2 id='Dictionary'>Dictionary</h2>
<pre>
# = number
? = string or number
All support use of * for machine state
All support use of $ for pointer
All support use of @ for value at pointer

:X : label X
ADD # : set value at pointer to itself plus argument
AND ? : set value at pointer to argument if itself is 1, otherwise, return itself.
APP ? : append string to value at pointer<!--DEC   : decrement value at pointer-->
DIV # : set value at pointer to itself divided by argument
EXP # : set value at pointer to itself raised to argument<!--GOT   : set pointer to state
INC   : increment value at pointer
INP   : set value at pointer to state-->
IOR ? : set value at pointer to argument if itself is 0, otherwise, return itself.
JFN ? : jump to line if value at pointer is not same as machine state
JIF ? : jump to line if value at pointer is same as machine state
JIG ? : jump to line if value at pointer is greater than machine state
JIL ? : jump to line if value at pointer is less than machine state
JIZ ? : jump to line if value at pointer is zero
JMP ? : jump to line
JNZ ? : jump to line if value at pointer is not zero<!--LLL   : decrement pointer-->
MMS # : add argument to machine state
MOD # : set value to value at pointer modulo argument
MOV # : increment pointer by argument
MUL # : set value at pointer to itself multiplied by argument
NAN ? : set value at pointer to 0 if argument and itself are 1, else 1
NEG   : negate value at pointer
NOP   : do nothing
NOR ? : set value at pointer to 1 if argument and itself are 0, else 0
NOT   : set value at pointer to 1 if 0, else 0
NRT # : set value at pointer to the argument-th root of itself<!--OUT   : set state to value at pointer-->
PNT # : set pointer to argument<!--RRR   : increment pointer-->
SET ? : set state to argument<!--SSP   : set state to pointer-->
STO ? : set value at pointer to argument<!--SUB # : set value at pointer to argument subtracted from itself-->
XNR ? : set value at pointer to 1 if argument same as itself, else 0
XOR ? : set value at pointer to 0 if argument same as itself, else 1
</pre>

<h3 id='Tables'>Tables</h3>
<!--Excluded: Jumps, MOD, MMS, SET, STO-->
<table>
	<tr>
		<th>+</th>
		<th>-</th>
	</tr>
	<tr>
		<td>NOP</td>
		<td>NEG</td>
	</tr>
	<tr>
		<td>ADD #*</td>
		<td></td>
	</tr>
	<tr>
		<td>MUL #</td>
		<td>DIV #</td>
	</tr>
	<tr>
		<td>EXP #</td>
		<td>NRT #</td>
	</tr>
</table>
<br/>
<table>
	<tr>
		<th>Name</th>
		<th>Command</th>
	</tr>
	<tr>
		<td>and</td>
		<td>AND ?</td>
	</tr>
	<tr>
		<td>nand</td>
		<td>NAND ?</td>
	</tr>
	<tr>
		<td>nor</td>
		<td>NOR ?</td>
	</tr>
	<tr>
		<td>not</td>
		<td>NOT #</td>
	</tr>
	<tr>
		<td>or</td>
		<td>IOR ?</td>
	</tr>
	<tr>
		<td>xor</td>
		<td>XOR ?</td>
	</tr>
	<tr>
		<td>xnor</td>
		<td>XNR ?</td>
	</tr>
</table>
<br/>
MM can also emulate BF programs easily, with the following substitutions:
<br/>
<table>
	<tr>
		<th>BF Command</th>
		<th>MM Equivalent</th>
	</tr>
	<tr>
		<td>></td>
		<td>MOV 1</td>
	</tr>
	<tr>
		<td>&lt;</td>
		<td>MOV -1</td>
	</tr>
	<tr>
		<td>+</td>
		<td>ADD 1</td>
	</tr>
	<tr>
		<td>-</td>
		<td>ADD -1</td>
	</tr>
	<tr>
		<td>.</td>
		<td>SET @</td>
	</tr>
	<tr>
		<td>,</td>
		<td>STO *</td>
	</tr>
	<tr>
		<td>[</td>
		<td>:X</td>
	</tr>
	<tr>
		<td>]</td>
		<td>JNZ X</td>
	</tr>
</table>

<h2 id='Programs'>Programs</h2>

<h3 id='Hello,_World!'>Hello, World!</h3>
<p>
	A 'Hello, World!' program. 
</p>
<pre>
STO Hello, World!
</pre>

<h3 id='Addition'>Addition</h3>
<p>
	Adds the numbers 5 and 8 without the ADD operator.
</p>
<pre>
STO 5
MOV 1
STO 8
MOV -1
ADD 1
MOV 1
ADD -1
JNZ 3
</pre>

<h3 id='Identification'>Identification</h3>
<p>
	Checks to see if Chuck is Alice or Bob, and, if so, Greet them.
</p>
<pre>
STO Chuck
SET Alice
JIF 5
SET Bob
JNF X
STO Welcome, 
MOV 1
STO *
:X
</pre>

<h3 id='Triangular_Number'>Triangular Number</h3>
<p>
	Finds the nth triangular number, using only the addition operator. Also, I have ADD included a compressed version of the same program, and a version using exponentiation and division. 
</p>
<pre>
STO 10
SET @
MOV 1
STO *
ADD -1
JNZ 1
MOV -1
:A
MOV -1
ADD 1
MOV 1
ADD -1
JNZ A
MOV -2
JIZ X
MOV 1
JMP A
:X
</pre>
<pre>
STO 10
SET @
MOV 1
STO *
ADD -1
JNZ 1
MOV -1
MOV -1
ADD 1
MOV 1
ADD -1
JNZ 7
MOV -2
JIZ 15
MOV 1
JNZ 7
</pre>
<pre>
STO 10
SET @
EXP 2
MOV 1
STO *
MOV -1
ADD 1
MOV 1
ADD -1
JNZ 5
MOV -1
DIV 2
</pre>

<h3 id='Leap_Year'>Leap Year</h3>
<p>
	Checks whether 2018 is a leap year or not.
</p>
<pre>
STO 2018
SET @
MOD 400
JIZ T
STO *
MOD 100
JIZ F
STO *
MOD 4
JNZ F
:T
STO 1
JMP X
:F
STO 0
:X
</pre>

<h3 id='Sorting'>Sorting</h3>
<p>
	Finds the largest entry and prints it in the first square. 
</p>
<pre>
SET @
MOV 1
JIZ 6
JIL 1
SET @
JMP 0
PNT 0
STO *
</pre>

<div id="bottom"></div>
</html>