<!doctype html>
<html lang="en-US">
<meta charset="utf-8">
<meta name="description" content="Mocha's Machine">
<link rel="shortcut icon" href="img/favicon.ico">
<link href=simple.css type="text/css" rel="stylesheet" title="Light">
<link href=dark.css type="text/css" rel="alternate stylesheet" title="Dark"> 
<link href=blend.css type="text/css" rel="alternate stylesheet" title="Blend">
<link href=print.css type="text/css" rel="stylesheet" media="print">
<script src="toc.js"></script>
<script src="turing.js"></script>
<style>
#program{text-align:center;}
.pointed{color:#080;background-color: #CEC;text-style:bold;}
pre{font-family:Monospace;background-color:#000;color:#ccc;}
</style>
<title>Mocha's Machine</title>
<div id="nav"></div>
<div id="top"><h1 id="Mocha's Machine">Mocha's Machine</h1></div>

<div id="program">
	<textarea id="code" rows="16" cols="64"></textarea><br/>
	<input type="submit" value="Load" onclick="run();">
	<input type="submit" value="Step" onclick="fstep();">
	<input type="submit" value="Reset" onclick="reset();">
	Line <span id="line">0</span>
	 | Pointer: <span id="pointing">0</span>
	 | State: <span id="machinestate">[PRESS RESET]</span>
	 <br/>
	 &downarrow; MEMORY &downarrow;
</div>
<div id="memory"></div>

<h2 id='Dictionary'>Dictionary</h2>
<pre>
# = number
? = string or number
! = specialchar
All support use of * for machine state
All support use of $ for pointer
All support use of @ for value at pointer

0 Arguments
NEG : set value at pointer to its negative
NOT : set value at pointer to 1 if 0, else 0

1 Argument
:X : Label 'X'. Can also be used as comments and empty lines
ADD # : set value at pointer to itself plus argument
AND ? : set value at pointer to argument if itself is 1, otherwise,
        return itself
APP ? : append string to value at pointer
DIV # : set value at pointer to itself divided by argument
EXP # : set value at pointer to itself raised to argument
FUN # : swap this line of code with the #-th line after this
IOR ? : set value at pointer to argument if itself is 0, otherwise,
        return itself
JIF ? : jump to line if value at pointer is same as machine state
JIG ? : jump to line if value at pointer is greater than machine state
JIL ? : jump to line if value at pointer is less than machine state
JIZ ? : jump to line if value at pointer is zero
JMP ? : jump to line
JNE ? : jump to line if value at pointer is not same as machine state
JNZ ? : jump to line if value at pointer is not zero
MMS # : set machine state to itself plus argument
MOD # : set value at pointer to itself modulo argument
MOV # : set pointer to itself plus argument
MUL # : set value at pointer to itself multiplied by argument
NAN ? : set value at pointer to 0 if argument and itself are 1, else 1
NOR ? : set value at pointer to 1 if argument and itself are 0, else 0
NRT # : set value at pointer to the argument-th root of itself
XNR ? : set value at pointer to 1 if argument same as itself, else 0
XOR ? : set value at pointer to 0 if argument same as itself, else 1

2 Arguments
FRG #,? : replace the argument(s) in the code at line # with ?
FSW #,# : swap the code at the specified lines
LET ! ? : set * or $ or @ to argument
SWP ! ! : swaps two specials

4 Arguments

FAA #,#,#,# : replace the code from char #<sub>1</sub> to char #<sub>2</sub> with the code
              from char #<sub>3</sub> to char #<sub>4</sub>.
</pre>

<h3 id='Tables'>Tables</h3>
<!--Excluded: Jumps, MOD, MMS, SET, STO-->
<table>
	<tr>
		<th>+</th>
		<th>-</th>
	</tr>
	<tr>
		<td></td>
		<td>NEG</td>
	</tr>
	<tr>
		<td>ADD #</td>
		<td></td>
	</tr>
	<tr>
		<td>MUL #</td>
		<td>DIV #</td>
	</tr>
	<tr>
		<td>EXP #</td>
		<td>NRT #</td>
	</tr>
</table>
<br/>
<table>
	<tr>
		<th>Name</th>
		<th>Command</th>
	</tr>
	<tr>
		<td>and</td>
		<td>AND ?</td>
	</tr>
	<tr>
		<td>nand</td>
		<td>NAND ?</td>
	</tr>
	<tr>
		<td>nor</td>
		<td>NOR ?</td>
	</tr>
	<tr>
		<td>not</td>
		<td>NOT #</td>
	</tr>
	<tr>
		<td>or</td>
		<td>IOR ?</td>
	</tr>
	<tr>
		<td>xor</td>
		<td>XOR ?</td>
	</tr>
	<tr>
		<td>xnor</td>
		<td>XNR ?</td>
	</tr>
</table>
<br/>
MM can also emulate BF programs easily, with the following substitutions:
<br/>
<table>
	<tr>
		<th>BF Command</th>
		<th>MM Equivalent</th>
	</tr>
	<tr>
		<td>></td>
		<td>MOV 1</td>
	</tr>
	<tr>
		<td>&lt;</td>
		<td>MOV -1</td>
	</tr>
	<tr>
		<td>+</td>
		<td>ADD 1</td>
	</tr>
	<tr>
		<td>-</td>
		<td>ADD -1</td>
	</tr>
	<tr>
		<td>.</td>
		<td>LET * @</td>
	</tr>
	<tr>
		<td>,</td>
		<td>LET @ *</td>
	</tr>
	<tr>
		<td>[</td>
		<td>:X</td>
	</tr>
	<tr>
		<td>]</td>
		<td>JNZ X</td>
	</tr>
</table>

<h2 id='Programs'>Programs</h2>

<h3 id='Hello,_World!'>Hello, World!</h3>
<p>
	A 'Hello, World!' program. 
</p>
<pre>
LET @ Hello, World!
</pre>

<h3 id='Addition'>Addition</h3>
<p>
	Adds the numbers 5 and 8
</p>
<pre>
LET @ 5
LET * 8
ADD *
</pre>

<h3 id='Identification'>Identification</h3>
<p>
	Checks to see if Chuck is Alice or Bob, and, if so, Greet them.
</p>
<pre>
LET @ Chuck
LET * Alice
JIF 5
LET * Bob
JNF X
LET @ Welcome, 
MOV 1
LET @ *
:X
</pre>

<h3 id='Triangular_Number'>Triangular Number</h3>
<p>
	Finds the nth triangular number, using only the addition operator. Also, I have ADD included a compressed version of the same program, and a version using exponentiation and division. 
</p>
<pre>
LET @ 10
LET * @
MOV 1
LET @ *
ADD -1
JNZ 1
MOV -1
:A
MOV -1
ADD 1
MOV 1
ADD -1
JNZ A
MOV -2
JIZ X
MOV 1
JMP A
:X
</pre>
<pre>
LET @ 10
LET * @
MOV 1
LET @ *
ADD -1
JNZ 1
MOV -1
MOV -1
ADD 1
MOV 1
ADD -1
JNZ 7
MOV -2
JIZ 15
MOV 1
JNZ 7
</pre>
<pre>
LET @ 10
LET * @
EXP 2
ADD *
DIV 2
</pre>

<h3 id='Leap_Year'>Leap Year</h3>
<p>
	Checks whether 2018 is a leap year or not. Includes compressed version. 
</p>
<pre>
LET @ 2018
LET * @
MOD 400
JIZ T
LET @ *
MOD 100
JIZ F
LET @ *
MOD 4
JNZ F
:T
LET @ 1
JMP X
:F
LET @ 0
:X
</pre>
<pre>
LET @ 2018
LET * @
MOD 400
JIZ 10
LET @ *
MOD 100
JIZ 12
LET @ *
MOD 4
JNZ 12
LET @ 1
JMP X
LET @ 0
:X
</pre>

<h3 id='Sorting'>Sorting</h3>
<p>
	Finds the largest entry and prints it in the first square. 
</p>
<pre>
LET * @
MOV 1
JIZ 6
JIL 1
LET * @
JMP 0
LET $ 0
LET @ *
</pre>

<h3 id='Almost-Quine'>Almost-Quine</h3>
<p>
	This code outputs its first line.
</p>
<pre>
FAA 21,21,0,14
LET @ X
</pre>

<div id="bottom"></div>
</html>