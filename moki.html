<!doctype html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="description" content="Moki Interpreter">
	<meta name="keywords" content="mocha,mocha2007,dangak,namei,oneia,conworld,conlang">
	<meta name="author" content="Mocha2007">
	<meta name="owner" content="Mocha2007">
	<!-- http://ogp.me/ -->
	<meta name="og:title" content="Moki Interpreter">
	<meta name="og:description" content="Moki Interpreter">
	<meta name="og:type" content="website">
	<meta name="og:image" content="img/icons/m_512.png">
	<meta name="og:image:type" content="image/png">
	<meta name="og:image:alt" content="Mocha's Squiggle">
	<meta name="og:url" content="https://mocha2007.github.io/turing">
	<meta name="viewport" content="width=700,initial-scale=1">
	<meta name="theme-color" content="#00FFFF">
	<meta name="msapplication-config" content="IEconfig.xml">
	<link rel="alternate" type="application/atom+xml" title="Mocha's Site Feed" href="https://github.com/Mocha2007/mocha2007.github.io/commits/master.atom"/>
	<link href=simple.css type="text/css" rel="stylesheet" title="Light">
	<link href=dark.css type="text/css" rel="alternate stylesheet" title="Dark"> 
	<link href=blend.css type="text/css" rel="alternate stylesheet" title="Blend">
	<link href=print.css type="text/css" rel="stylesheet" media="print">
	<link rel="shortcut icon" href="img/favicon.ico">
	<link rel="apple-touch-icon" sizes="180x180" href="img/icons/apple-touch-icon.png">
	<link rel="manifest" href="manifest.json">
	<link rel="mask-icon" href="img/icons/safari-pinned-tab.svg" color="#00cccc">
	<title>Moki Interpreter</title>
	<script src="toc.js"></script>
	<script src="moki.js"></script>
	<style>
		#program{text-align:center;}
		dl,pre,td{font-family:monospace;background-color:#000;color:#ccc;text-align:left;}
		#console{text-align:left;padding-left:9px;padding-right:9px;}
		.ci{color:#48F;}
		.cw{color:#FC0;}
		.ce{color:#F44;}
		.co{color:#8E8;}
		.cf{color:#F8F;}
		.invisible{display:none;}
		.cimg{max-width:642px;}
	</style>
</head>

<div id="nav"></div>
<div id="top"><h1 id="Moki">Moki</h1></div>

<div id="program">
	<div>
		<pre>			Code				Input</pre>
		<textarea id="code" rows="16" cols="64"></textarea>
		<textarea id="input" rows="16" cols="24"></textarea>
	</div>
	<input type="submit" value="Reset" onclick="reset();"> &rarr;
	<input type="submit" value="Step" onclick="fstep();"> |
	<input type="submit" value="100 Steps" onclick="fstep100();"> |
	<input type="submit" value="Random Program" onclick="rprog();fstep100();"> <!--the fstep here is only TEMPORARY, pls remove-->
	Len = <input type="text" id="rlen" size=1>
	Suppress <input type="checkbox" id="suppresse"><label for="suppresse">E</label> <input type="checkbox" id="suppressw"><label for="suppressw">W</label>
	<br/>
	<i>Reading Char <span id="line">0</span></i><br/>
	<i>Stack: [<span id="stack">0</span>]</i>
	<pre id='console'><i>Moki rev 1.6.6</i></pre>
</div>

<h2 id='Introduction'>Introduction</h2>

<p>
	<b>Moki</b> is a stack-based programming language. 
	After dissatisfaction with my first language, <a href='turing.html'>Mochine</a>, I've since turned to more <i>golfy</i> methods of representation. 
	In this aspect I've made as many functions as string-compatible as possible. 
	Multiplication, and even division work with strings. 
	Instead of erroring out I try and think of alternative uses until the logic simply breaks down and I have to issue an error. 
</p>

<h2 id='Changelog'>Changelog</h2>

<dl>
	<dt>1.6.6</dt>
		<dd>Added Z, which filters array using a premade filter, in preparation for my addition of f [filter function].</dd>
	<dt>1.6.5</dt>
		<dd>Added z, which deletes falsey values from array, in preparation for my addition of f [filter function].</dd>
	<dt>1.6.4</dt>
		<dd>Added m, the map function, along with ¡, which applies a function to the last element of an array, À, which rotates the last item to the beginning of the array, and Á, which does the opposite.</dd>
	<dt>1.6.3</dt>
		<dd>Added U. Using ^ with a string or array invokes intersection instead.</dd>
	<dt>1.6.2</dt>
		<dd>Baleeted string exponentiation. Soon, it will be replaced as the INTERSECTION operator.</dd>
	<dt>1.6.1</dt>
		<dd>Any data type can now be the name of a function.</dd>
	<dt>1.6</dt>
		<dd>Define functions and constants using the following syntax:<br/>
		'quintuple',',5*'<abbr title='Function Definition'>:</abbr><br/>
		2'quintuple'<abbr title='Function Execution'>`</abbr>
		</dd>
	<dt>1.5.3</dt>
		<dd>Added MG (gcd) and MQ (quadratic formula).</dd>
	<dt>1.5.2</dt>
		<dd>Added Ć (nCr) and Ṕ (nPr).</dd>
	<dt>1.5.1</dt>
		<dd>Some trig functions. Base n log.</dd>
	<dt>1.5</dt>
		<dd>Found resolutions to many errors.</dd>
	<dt>1.4.4</dt>
		<dd>Improved warning code.<br/>
		Fixed minor bugs with multiplication and factorial.</dd>
	<dt>1.4.3</dt>
		<dd>I've worked out, as far as I can tell, nearly every kink in the code.</dd>
	<dt>1.4.2</dt>
		<dd>Added random program and error suppression.<br/>
		Various minor bugfixes.</dd>
	<dt>1.4.1</dt>
		<dd>Added escape character \' \\.<br/>
		Added stack visualization.</dd>
	<dt>1.4</dt>
		<dd>Arrays:<br/>
		Added P, a, p.</dd>
	<dt>1.3</dt>
		<dd>Minor bugfixes. Cleaned code.<br/>
		Added Mx, Tx, I{}, W{}.</dd>
	<dt>1.2.1</dt>
		<dd>Added more errors... :(<br/>
		The stack now starts with 0 again... :(</dd>
	<dt>1.2</dt>
		<dd>Added A, G, L, M, P, S, V, e, l, m, s, t, γ, and π.<br/>
		The stack now starts empty.</dd>
	<dt>1.1</dt>
		<dd>Added ~.<br/>
		Fewer errors</dd>
	<dt>1.0</dt>
		<dd>Initial Release.</dd>
</dl>

<h2 id='Upcoming'>Upcoming Features</h2>
<dl>
	<dt>filter()</dt>
		<dd>the upcoming filter() function will probably take the following form:<br/>
		[...] 'function' f -> filter('function',[...])
		</dd>
</dl>

<h2 id='Dictionary'>Dictionary</h2>

<p>
	Let S<sub>n</sub> = the nth item in the stack (looking down, eg., top of stack = 0). 
</p>

<dl>
	<dt>(Whitespace)</dt>
		<dd>
		Does nothing.
		</dd>
	<dt>!</dt>
		<dd>
		! := S<sub>0</sub>(&lambda;x.x==0 ? 1 : 0)
		</dd>
	<dt>"</dt>
		<dd>
		if S<sub>0</sub> is a Real &rarr; converts S<sub>0</sub> from decimal to unicode<br/>
		if S<sub>0</sub> is a String &rarr; do nothing
		</dd>
	<dt>#</dt>
		<dd>
		Delimits comments.
		</dd>
	<dt>$</dt>
		<dd>
		Push next line of input to stack. 
		</dd>
	<dt>%</dt>
		<dd>
		S<sub>1</sub> = S<sub>1</sub> mod S<sub>0</sub>, pop S<sub>0</sub>
		</dd>
	<dt>&amp;</dt>
		<dd>
		&amp; := (S<sub>0</sub>,S<sub>1</sub>)(&lambda;(y,x).(x!=0 &amp; y!=0) ? x : 0) 
		</dd>
	<dt>'</dt>
		<dd>
		Delimits strings.
		</dd>
	<dt>(</dt>
		<dd>
		if S<sub>0</sub> is a Real &rarr; decrement<br/>
		if S<sub>0</sub> is a String &rarr; decrement its decimal value, but keep it a string
		</dd>
	<dt>)</dt>
		<dd>
		if S<sub>0</sub> is a Real &rarr; increment<br/>
		if S<sub>0</sub> is a String &rarr; increment its decimal value, but keep it a string
		</dd>
	<dt>*</dt>
		<dd>
		if S<sub>0</sub> is a String, return as if it were S<sub>0</sub>.charCodeAt(0)<br/>
		if S<sub>1</sub> is a Real &rarr; S<sub>1</sub> = S<sub>0</sub>S<sub>1</sub><br/>
		if S<sub>1</sub> is a String &rarr; concatenate it S<sub>0</sub> times<br/>
		don't forget to pop S<sub>0</sub>
		</dd>
	<dt>+</dt>
		<dd>
		if both are reals, return their sum<br/>
		else return their concatenation<br/>
		don't forget to pop S<sub>0</sub>
		</dd>
	<dt>,</dt>
		<dd>
		push 0 onto the stack
		</dd>
	<dt>-</dt>
		<dd>
		subtraction - treat characters like their charcodes
		</dd>
	<dt>.</dt>
		<dd>
		duplicate top of stack
		</dd>
	<dt>/</dt>
		<dd>
		division - treat string divisors as their charcodes, split dividend strings into n parts
		</dd>
	<dt>0-9</dt>
		<dd>
		if S<sub>0</sub> is a Real &rarr; multiply top of stack by 10, add n<br/>
		if S<sub>0</sub> is a String &rarr; concatenate
		</dd>
	<dt>;</dt>
		<dd>
		pop top of stack
		</dd>
	<dt>&lt;</dt>
		<dd>
		push 1 if a&lt;b else push 0
		</dd>
	<dt>=</dt>
		<dd>
		push 1 if a=b else push 0
		</dd>
	<dt>></dt>
		<dd>
		push 1 if a>b else push 0
		</dd>
	<dt>?</dt>
		<dd>
		a b c -> b if a else c<br/>
		a b -> b
		</dd>
	<dt>@</dt>
		<dd>
		move top of stack to the bottom
		</dd>
	<dt>A</dt>
		<dd>
		arithmetic mean of stack
		</dd>
	<dt>G</dt>
		<dd>
		geometric mean of stack
		</dd>
	<dt>I</dt>
		<dd>
		If top of stack false, skip to next }
		</dd>
	<dt>L</dt>
		<dd>
		replace top of stack with push its length
		</dd>
	<dt>M</dt>
		<dd>
		mathlibrary prefix
		</dd>
	<dt>P</dt>
		<dd>
		push to array:<br/>
		[...] # -> [...#] else<br/>
		# [...] -> [#...] else<br/>
		# $ -> [#,$]
		</dd>
	<dt>T</dt>
		<dd>
		timelibrary prefix
		</dd>
	<dt>U</dt>
		<dd>
		array/string union
		</dd>
	<dt>V</dt>
		<dd>
		push moki version string to stack
		</dd>
	<dt>W</dt>
		<dd>
		W{} = while top of stack is true, loop contents
		</dd>
	<dt>Z</dt>
		<dd>
		[array1] [array2] Z -> filters array1 using truthiness of corresponding indices of array2
		</dd>
	<dt>[</dt>
		<dd>
		### -> floor(###)<br/>
		'ABC' -> 'abc'
		</dd>
	<dt>\</dt>
		<dd>
		swap top two stack items
		</dd>
	<dt>]</dt>
		<dd>
		### -> ceil(###)<br/>
		'abc' -> 'ABC'
		</dd>
	<dt>^</dt>
		<dd>
		exponentiation.<br/>
		with a string or array as an argument, instead acts as set intersection.
		</dd>
	<dt>`</dt>
		<dd>
		X` -> call function X
		</dd>
	<dt>a</dt>
		<dd>
		push empty array to stack
		</dd>
	<dt>e</dt>
		<dd>
		empty stack -> push e<br/>
		TOS is number -> TOS*=e
		</dd>
	<dt>l</dt>
		<dd>
		# -> ln(#)
		</dd>
	<dt>m</dt>
		<dd>
		map:<br/>
		[array] 'function' -> map(function,array)
		</dd>
	<dt>p</dt>
		<dd>
		[...#] -> [...] #
		</dd>
	<dt>z</dt>
		<dd>
		filters falsey values from an array
		</dd>
	<dt>{</dt>
		<dd>
		begin loops
		</dd>
	<dt>|</dt>
		<dd>
		# -> abs(#)
		</dd>
	<dt>}</dt>
		<dd>
		end loops
		</dd>
	<dt>~</dt>
		<dd>
		# -> -#<br/>
		'abc' -> 'cba'
		</dd>
	<dt>¡</dt>
		<dd>
		maps to last array item:<br/>
		[array] 'function' -> [array]+[function(array[array.length-1])]
		</dd>
	<dt>À</dt>
		<dd>rotate last array item to beginning</dd>
	<dt>Á</dt>
		<dd>rotate first array item to end</dd>
	<dt>Ć</dt>
		<dd>
		A B -> A nCr B
		</dd>
	<dt>γ</dt>
		<dd>
		empty stack -> push γ<br/>
		TOS is number -> TOS*=γ
		</dd>
	<dt>π</dt>
		<dd>
		empty stack -> push π<br/>
		TOS is number -> TOS*=π
		</dd>
	<dt>Ṕ</dt>
		<dd>
		A B -> A nPr B
		</dd>
	Todo: Add Libraries to Dictionary
</dl>

<h2 id='Programs'>Programs</h2>

<h3 id='Program_Shorter_than_Output'>Program Shorter than Output (0 bytes)</h3>
<p>
	Outputs "0".
</p>
<pre>
 
</pre>

<h3 id='Program_Shorter_than_Positive_Output'>Program Shorter than Positive Output (3 bytes)</h3>
<p>
	My best solution, so far, to <a href="https://codegolf.stackexchange.com/questions/67921/what-is-the-smallest-positive-base-10-integer-that-can-be-printed-by-a-program-s">this codegolf challenge</a>. Score: 5,040.
</p>
<pre>
7M!
</pre>
<p>
	Alternate non-static solution better until August 12, 2066 (at the time of writing, Score = 2,507):
</p>
<pre>
Tw[
</pre>

<h3 id='nth_Triangular_Number'>nth Triangular Number (7 bytes)</h3>
<p>
	Noice.
</p>
<pre>
$.,2^MS
</pre>

<h3 id='Output_Length'>Output length n*program length (9 bytes)</h3>
<p>
	My best solution to <a href="https://codegolf.stackexchange.com/questions/59436/create-output-twice-the-length-of-the-code">this codegolf challenge</a> (Score: -16).
</p>
<pre>
;'m',9*$*
</pre>

<h3 id='moki'>moki (14 bytes)</h3>
<p>
	Prints "moki" without the use of any characters.
</p>
<pre>
109".)).,4-.((
</pre>

<h3 id='Hello World'>Hello World (16 bytes)</h3>
<p>
	Prints "Hello, World!".
</p>
<pre>
;'Hello, World!'
</pre>

<h3 id='Largest_Number_Printable'>Largest Number Printable (Score >10<sup>7122</sup>)</h3>
<p>
	My best solutions, sorted by size, so far, to <a href="https://codegolf.stackexchange.com/questions/18028/largest-number-printable">this codegolf challenge</a>.
</p>
<p>
	1 &rarr; 1 | Score: 1</sup>
</p>
<pre>
)
</pre>
<p>
	Or, alternatively,
</p>
<pre>
L
</pre>
<p>
	2 &rarr; 1516378243.512 | Score: 189,547,280</sup>
</p>
<pre>
Tt
</pre>
<p>
	3 &rarr; 4763842749.880693 | Score: 176,438,620</sup>
</p>
<pre>
Ttπ
</pre>
<p>
	4 &rarr; 14966053385.882185 | Score: 233,844,584</sup>
</p>
<pre>
Ttππ
</pre>
<p>
	7 &rarr; 16331239353195370 | Score: 47,612,942,720,686</sup>
</p>
<pre>
1π,2/Mt
</pre>
<p>
	[Worked until 1.6.2] 8 &rarr; 9.999...&times;10<sup>7124</sup> | Score: 1.953...&times;10<sup>7122</sup>
</p>
<pre>
':'('~'^
</pre>

<h3 id='Quadratic'>Quadratic Solver (32 bytes)</h3>
<p>
	Solves the quadratic with the given coefficients.
</p>
<pre>
;$.$.~\,2^,4$*@@@@*-,1,2/^+,2/@/
</pre>

<h3 id='Broken_Shift'>Broken Shift (49 bytes)</h3>
<p>
	Moki solution to <a href='https://codegolf.stackexchange.com/questions/39952/programming-with-a-sporadic-shift-key'>this code challenge</a>. Score: 2<sup>-13</sup>.
</p>
<pre>
;'Dear C''omputer, please stop giving me shift!'[
</pre>

<h3 id='Polyglots'>Polyglots</h3>
<p>
	Prints the name of the language.  
</p>

<h4 id='Perl'>Moki/Perl (22 bytes)</h3>
<pre>
#;'Moki'#
print 'Perl'
</pre>

<h4 id='Ruby'>Moki/Ruby (22 bytes)</h3>
<pre>
#;'Moki'#
print 'Ruby'
</pre>

<h4 id='Python'>Moki/Python (25 bytes)</h3>
<pre>
#;'Moki'#
print('Python')
</pre>

<h4 id='Haskell'>Moki/Haskell (27 bytes)</h3>
<pre>
--;'Moki'#
putStr "Haskell"
</pre>

<h4 id='JavaScript'>Moki/JavaScript (33 bytes)</h3>
<pre>
1,1//;'Moki'#
alert('JavaScript')
</pre>

<h4 id='C'>Moki/C (55 bytes)</h3>
<pre>
#include&lt;stdio.h>
int main(){printf("C");}//#;'Moki'
</pre>

<div id="bottom"></div>
</html>